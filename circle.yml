machine:
  xcode:
    version: 8.2

checkout:
  post:
    - git submodule update --init

dependencies:
  pre:
    - gem install xcpretty --no-rdoc --no-ri --no-document --quiet
    - if [[ $CIRCLE_BRANCH == master ]]; then pod setup; fi
  cache_directories:
    -  "~/.cocoapods/repos/master"

test:
  override:
    - rake xcode:test
  post:
    - if [[ $CIRCLE_BRANCH == master ]]; then rake lint; fi
